<div class="pwa-demo-container">
  <div class="header">
    <h1>ğŸš€ DemostraciÃ³n PWA</h1>
    <p>Progressive Web App - CaracterÃ­sticas y Funcionalidades</p>
  </div>

  <!-- Estado General -->
  <div class="card">
    <h2>ğŸ“Š Estado General</h2>
    <div class="status-grid">
      <div class="status-item" [class.active]="isOnline">
        <span class="icon">{{ isOnline ? 'ğŸŸ¢' : 'ğŸ”´' }}</span>
        <div>
          <strong>ConexiÃ³n</strong>
          <p>{{ isOnline ? 'Online' : 'Offline' }}</p>
        </div>
      </div>

      <div class="status-item" [class.active]="isPWA">
        <span class="icon">{{ isPWA ? 'âœ…' : 'âŒ' }}</span>
        <div>
          <strong>Modo PWA</strong>
          <p>{{ isPWA ? 'Instalada' : 'No instalada' }}</p>
        </div>
      </div>

      <div class="status-item" [class.active]="serviceWorkerStatus.includes('Active')">
        <span class="icon">ğŸ”§</span>
        <div>
          <strong>Service Worker</strong>
          <p>{{ serviceWorkerStatus }}</p>
        </div>
      </div>

      <div class="status-item">
        <span class="icon">ğŸ’¾</span>
        <div>
          <strong>Cache</strong>
          <p>{{ cacheStatus }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- InstalaciÃ³n -->
  @if (isInstallable && !isPWA) {
    <div class="card install-card">
      <h2>ğŸ“² Instalar AplicaciÃ³n</h2>
      <p>Esta aplicaciÃ³n puede instalarse en tu dispositivo como una app nativa.</p>
      <button class="btn-install" (click)="installPWA()">
        Instalar PWA
      </button>
    </div>
  }

  <!-- ActualizaciÃ³n -->
  @if (hasUpdate) {
    <div class="card update-card">
      <h2>ğŸ”„ ActualizaciÃ³n Disponible</h2>
      <p>Hay una nueva versiÃ³n de la aplicaciÃ³n disponible.</p>
      <button class="btn-update" (click)="reloadApp()">
        Actualizar Ahora
      </button>
    </div>
  }

  <!-- Funcionalidades PWA -->
  <div class="card">
    <h2>âœ¨ Funcionalidades PWA</h2>
    
    <div class="feature">
      <h3>1ï¸âƒ£ Funciona Offline</h3>
      <p>La app cachea recursos y puede funcionar sin conexiÃ³n.</p>
      <button class="btn-secondary" (click)="testOffline()">
        CÃ³mo Probar
      </button>
    </div>

    <div class="feature">
      <h3>2ï¸âƒ£ Instalable</h3>
      <p>Se puede instalar en el escritorio o pantalla de inicio.</p>
      <ul>
        <li>En Chrome: Click en â‹® â†’ "Instalar aplicaciÃ³n"</li>
        <li>En mÃ³vil: "Agregar a pantalla de inicio"</li>
      </ul>
    </div>

    <div class="feature">
      <h3>3ï¸âƒ£ Service Worker</h3>
      <p>Intercepta peticiones y maneja el cache automÃ¡ticamente.</p>
      <p><strong>Estado:</strong> {{ serviceWorkerStatus }}</p>
    </div>

    <div class="feature">
      <h3>4ï¸âƒ£ Cache Inteligente</h3>
      <p>Almacena recursos para carga rÃ¡pida y funcionamiento offline.</p>
      <p><strong>Estado:</strong> {{ cacheStatus }}</p>
      <button class="btn-secondary" (click)="clearCache()">
        Limpiar Cache
      </button>
    </div>

    <div class="feature">
      <h3>5ï¸âƒ£ Actualizaciones AutomÃ¡ticas</h3>
      <p>Detecta y aplica nuevas versiones automÃ¡ticamente.</p>
      <p><strong>Estado:</strong> {{ hasUpdate ? 'ActualizaciÃ³n disponible' : 'Actualizado' }}</p>
    </div>
  </div>

  <!-- Instrucciones de Prueba -->
  <div class="card instructions">
    <h2>ğŸ§ª CÃ³mo Probar el PWA</h2>
    
    <div class="instruction-step">
      <strong>1. Servir en ProducciÃ³n</strong>
      <code>npm run build && npx http-server dist/client -p 8080 --ssl</code>
      <p>O despliega en Vercel/Netlify (automÃ¡tico con HTTPS)</p>
    </div>

    <div class="instruction-step">
      <strong>2. Verificar HTTPS</strong>
      <p>Los PWA requieren HTTPS (excepto en localhost)</p>
    </div>

    <div class="instruction-step">
      <strong>3. Abrir DevTools</strong>
      <p>F12 â†’ Application â†’ Service Workers / Manifest</p>
    </div>

    <div class="instruction-step">
      <strong>4. Probar Offline</strong>
      <p>DevTools â†’ Network â†’ Activar "Offline"</p>
    </div>

    <div class="instruction-step">
      <strong>5. Instalar</strong>
      <p>Chrome mostrarÃ¡ el Ã­cono de instalaciÃ³n en la barra de direcciones</p>
    </div>
  </div>

  <!-- Herramientas de AuditorÃ­a -->
  <div class="card tools">
    <h2>ğŸ” Herramientas de AuditorÃ­a</h2>
    
    <div class="tool-item">
      <strong>Lighthouse</strong>
      <p>DevTools â†’ Lighthouse â†’ Genera reporte PWA</p>
      <p>EvalÃºa: Performance, PWA, Accessibility, Best Practices, SEO</p>
    </div>

    <div class="tool-item">
      <strong>Chrome DevTools</strong>
      <p>F12 â†’ Application â†’ verifica Manifest, Service Workers, Cache Storage</p>
    </div>

    <div class="tool-item">
      <strong>PWA Builder</strong>
      <p><a href="https://www.pwabuilder.com/" target="_blank">pwabuilder.com</a> - Analiza tu PWA</p>
    </div>
  </div>
</div>
